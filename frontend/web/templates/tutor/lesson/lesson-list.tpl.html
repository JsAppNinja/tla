<div cg-busy="{promise:myPromise,message:'Importing quiz data, please wait ...',backdrop:true,delay:300,minDuration:700}">
    <div noty-container></div>
    <div class="form-group create-quiz-btn">
        <a ui-sref=".create" id="new-lesson" class="btn btn-primary" role="button"><span
                class="glyphicon glyphicon-plus"></span> Add new lesson</a>
        <button ng-if="sorted" ng-click="saveOrder()" class="btn btn-success"><i class="fa fa-check-circle-o"></i> Save order</button>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <div class="panel panel-default ">
                <div class="panel-heading">
                    <h3 class="panel-title">Lessons list</h3>
                </div>
                <div class="panel-body panel-table-body">
                    <h3 ng-show="!lessons.length" style="margin-left: 29px;">No lessons</h3>
                    <ul style="margin: 0;padding: 0;" ng-sortable="sortConfig">
                        <li ng-click="openLesson(lesson.id)" ng-repeat="lesson in lessons track by lesson.id" class="quiz-item">
                            <table class="table table-hover quiz-list vert-align">
                                <tr>
                                    <td class="sorting-handle"><i class="fa fa-sort"></i></td>
                                    <td>
                                        <span>{{lesson.title}}</span>
                                    </td>
                                    <td>
                                        <button ng-click="$event.stopPropagation();deleteLesson(lesson)"
                                                class="btn btn-xs btn-danger pull-right"><span
                                                class="glyphicon glyphicon-remove"></span></button>
                                        <a ui-sref=".edit({lesson_id: lesson.id})" ng-click="$event.stopPropagation()"
                                           class="btn btn-xs btn-primary pull-right subject-manage-btn"><span
                                                class="glyphicon glyphicon-pencil"></span></a>
                                        <button ng-click="$event.stopPropagation()"
                                           class="btn btn-xs btn-default pull-right subject-manage-btn"><span>Lesson materials</span></button>
                                    </td>
                                </tr>
                            </table>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="templateId">
    <div class="ngdialog-message">
        <h1>Lesson removal</h1>
        <p>You really want to delete "{{ deletedLesson.title }}" ?</p>
        <p><strong>Be aware: </strong>If you delete this lesson, all data related to this lesson will be removed </p>
    </div>
    <div class="ngdialog-buttons mt">
        <button class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog()">No</button>
        <button class="ngdialog-button ngdialog-button-primary" ng-click="confirm(deletedLesson.id)">Yes</button>
    </div>
</script>